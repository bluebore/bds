#!/bin/sh

PROTOBUF_PATH=$HOME/third
SOFA_PATH=$HOME/github/sofa-pbrpc/output
SNAPPY_PATH=$HOME/third
LZ_PATH=$HOME/third

echo "PROTOBUF_PATH=$PROTOBUF_PATH" > config.mk
echo "SOFA_PATH=$SOFA_PATH" >> config.mk
echo "SNAPPY_PATH=$SNAPPY_PATH" >> config.mk
echo "LZ_PATH=$LZ_PATH" >> config.mk

${PROTOBUF_PATH}/bin/protoc --cpp_out=src/ --proto_path=src/proto/ src/proto/dict_server.proto

SERVER_SRC_FILES=`find ./src/ -name *.cc | sort | tr "\n" " "`
SERVER_HEADER_FILES=`find ./src/ -name *.h | sort | tr "\n" " "`

echo "SERVER_SRC=$SERVER_SRC_FILES" >> config.mk
echo "SERVER_HEADER=$SERVER_HEADER_FILES" >> config.mk
